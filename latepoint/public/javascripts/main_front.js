function latepoint_is_timeframe_in_periods(e,t,a,n){for(var o=arguments.length>3&&void 0!==n&&n,s=0;s<a.length;s++){var i=0,l=0,r=0,d=0,c=a[s].split(":");if(2==c.length?(i=c[0],l=c[1]):(r=c[2],d=c[3],i=parseFloat(c[0])-parseFloat(r),l=parseFloat(c[1])+parseFloat(d)),o){if(latepoint_is_period_inside_another(e,t,i,l))return!0}else if(latepoint_is_period_overlapping(e,t,i,l))return!0}return!1}function latepoint_is_period_overlapping(e,t,a,n){return e<n&&a<t}function latepoint_is_period_inside_another(e,t,a,n){return e>=a&&t<=n}function latepoint_minutes_to_hours_preferably(e){var t=latepoint_is_army_clock(),a=Math.floor(e/60);!t&&a>12&&(a-=12);var n=e%60;return n>0&&(a=a+":"+n),a}function latepoint_minutes_to_hours(e){var t=latepoint_is_army_clock(),a=Math.floor(e/60);return!t&&a>12&&(a-=12),a}function latepoint_am_or_pm(e){return latepoint_is_army_clock()?"":e<720?"am":"pm"}function latepoint_hours_and_minutes_to_minutes(e,t){var a=e.split(":"),n=a[0],o=a[1];return"pm"==t&&n<12&&(n=parseInt(n)+12),"am"==t&&12==n&&(n=0),o=parseInt(o)+60*n}function latepoint_get_time_system(){return latepoint_helper.time_system}function latepoint_is_army_clock(){return"24"==latepoint_get_time_system()}function latepoint_minutes_to_hours_and_minutes(e,t){var a=latepoint_is_army_clock(),n=arguments.length>1&&void 0!==t?t:"%02d:%02d",o=Math.floor(e/60);!a&&o>12&&(o-=12);var s=e%60;return sprintf(n,o,s)}function latepoint_mask_timefield(e){jQuery().inputmask&&e.inputmask({mask:"99:99",placeholder:"HH:MM"})}function latepoint_mask_phone(e){latepoint_is_phone_masking_enabled()&&jQuery().inputmask&&e.inputmask(latepoint_get_phone_format())}function latepoint_get_phone_format(){return latepoint_helper.phone_format}function latepoint_is_phone_masking_enabled(){return"yes"==latepoint_helper.enable_phone_masking}function latepoint_show_booking_end_time(){return"yes"==latepoint_helper.show_booking_end_time}function latepoint_init_form_masks(){latepoint_is_phone_masking_enabled()&&latepoint_mask_phone(jQuery(".os-mask-phone"))}function latepoint_get_paypal_payment_amount(e){var t,a;return"deposit"==e.find('input[name="booking[payment_portion]"]').val()?e.find(".lp-paypal-btn-trigger").data("deposit-amount"):e.find(".lp-paypal-btn-trigger").data("full-amount")}function latepoint_add_notification(e,t="success"){var a=jQuery("body").find(".os-notifications");a.length||(jQuery("body").append('<div class="os-notifications"></div>'),a=jQuery("body").find(".os-notifications")),a.find(".item").length>0&&a.find(".item:first-child").remove(),a.append('<div class="item item-type-'+t+'">'+e+'<span class="os-notification-close"><i class="latepoint-icon latepoint-icon-x"></i></span></div>')}function latepoint_generate_form_message_html(e,t){var a='<div class="os-form-message-w status-'+t+'"><ul>';return Array.isArray(e)?e.forEach((function(e){a+="<li>"+e+"</li>"})):a+="<li>"+e+"</li>",a+="</ul></div>"}function latepoint_clear_form_messages(e){e.find(".os-form-message-w").remove()}function latepoint_show_data_in_lightbox(e,t=""){jQuery(".latepoint-lightbox-w").remove();var a="latepoint-lightbox-w latepoint-w ";t&&(a+=t),jQuery("body").append('<div class="'+a+'"><div class="latepoint-lightbox-i">'+e+'<a href="#" class="latepoint-lightbox-close"><i class="latepoint-icon latepoint-icon-x"></i></a></div><div class="latepoint-lightbox-shadow"></div></div>'),jQuery("body").addClass("latepoint-lightbox-active")}function show_next_btn(e){e.find(".latepoint-next-btn").removeClass("disabled"),e.removeClass("hidden-buttons")}function clear_step_services(e){latepoint_update_summary_field(e,"service",""),clear_sub_step_attendies(e)}function clear_sub_step_attendies(e){e.find(".latepoint_total_attendies").val(1),latepoint_update_summary_field(e,"total-attendies",""),clear_sub_step_duration(e)}function clear_sub_step_duration(e){e.find(".latepoint_duration").val(""),latepoint_update_summary_field(e,"duration","")}function clear_step_service_extras(e){latepoint_update_summary_field(e,"service-extras","")}function clear_step_locations(e){latepoint_update_summary_field(e,"location","")}function clear_step_agents(e){latepoint_update_summary_field(e,"agent","")}function clear_step_datepicker(e){latepoint_update_summary_field(e,"time",""),latepoint_update_summary_field(e,"date","")}function hide_next_btn(e){e.find(".latepoint-next-btn").addClass("disabled"),e.find(".latepoint-prev-btn.disabled").length&&e.addClass("hidden-buttons")}function show_prev_btn(e){e.find(".latepoint-prev-btn").removeClass("disabled"),e.removeClass("hidden-buttons")}function hide_prev_btn(e){e.find(".latepoint-prev-btn").addClass("disabled"),e.find(".latepoint-next-btn.disabled").length&&e.addClass("hidden-buttons")}function latepoint_show_capacity_selector(e){var t=e.closest(".latepoint-booking-form-element"),a=e.data("max-capacity"),n=e.data("min-capacity");t.find(".sta-sub-label span").text(a),t.find(".step-services-w").removeClass("selecting-service-duration"),t.find(".total-attendies-selector-w").data("max-capacity",a),t.find(".total-attendies-selector-w").data("min-capacity",n),e.closest(".step-services-w").addClass("selecting-total-attendies"),t.find(".total-attendies-selector-input").val(n),show_prev_btn(t),show_next_btn(t)}function latepoint_show_durations(e){var t=e.closest(".latepoint-booking-form-element");e.closest(".step-services-w").addClass("selecting-service-duration"),show_prev_btn(t),hide_next_btn(t)}function latepoint_apply_coupon(e){var t=e.closest(".latepoint-booking-form-element"),a=e;a.closest(".coupon-code-input-w").addClass("os-loading");var n=t.find(".latepoint-form").serialize(),o={action:"latepoint_route_call",route_name:e.data("route"),params:n,layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function(e){a.closest(".coupon-code-input-w").removeClass("os-loading"),"success"===e.status?(latepoint_show_message_inside_element(e.message,t.find(".latepoint-body"),"success"),latepoint_reload_step(t)):latepoint_show_message_inside_element(e.message,t.find(".latepoint-body"),"error")}})}function latepoint_coupon_removed(e){var t;e.closest(".applied-coupon-code").fadeOut(),latepoint_reload_step(e.closest(".latepoint-booking-form-element"))}function latepoint_reload_step(e){return e.find(".latepoint_step_direction").val("specific"),e.find(".latepoint-form").submit(),!1}function latepoint_get_new_prev_payment_class(e,t){var a="";switch(t){case"lp-show-pay-times":a="";break;case"lp-show-pay-methods":a=e.find(".lp-payment-times-w").length?"lp-show-pay-times":latepoint_get_new_prev_payment_class(e,"lp-show-pay-times");break;case"lp-show-pay-portion-selection":a=e.find(".lp-payment-methods-w").length?"lp-show-pay-methods":latepoint_get_new_prev_payment_class(e,"lp-show-pay-methods");break;case"lp-show-card":case"lp-show-paypal":a=e.find(".lp-payment-portion-selection-w").length?"lp-show-pay-portion-selection":latepoint_get_new_prev_payment_class(e,"lp-show-pay-portion-selection");break}return a}function latepoint_reset_password_from_booking_init(){jQuery(".os-step-existing-customer-login-w").hide(),jQuery(".os-password-reset-form-holder").on("click",".password-reset-back-to-login",(function(){return jQuery(".os-password-reset-form-holder").html(""),jQuery(".os-step-existing-customer-login-w").show(),!1}))}function latepoint_update_summary_field(e,t,a=""){var n=e.closest(".latepoint-with-summary");n.length&&((a=!!a&&String(a).trim())?(e.find(".os-summary-value-"+t).text(a).closest(".os-summary-line").addClass("os-has-value"),n.hasClass("latepoint-summary-is-open")?e.find(".os-summary-line.os-has-value").slideDown(150):e.find(".os-summary-line.os-has-value").fadeIn(200),n.addClass("latepoint-summary-is-open")):e.find(".os-summary-value-"+t).text("").closest(".os-summary-line").slideUp(150).removeClass("os-has-value"))}function latepoint_password_changed_show_login(e){jQuery(".os-step-existing-customer-login-w").show(),jQuery(".os-password-reset-form-holder").html(""),latepoint_show_message_inside_element(e.message,jQuery(".os-step-existing-customer-login-w"),"success")}function latepoint_hide_message_inside_element(e=jQuery(".latepoint-body")){e.length&&e.find(".latepoint-message").length&&e.find(".latepoint-message").remove()}function latepoint_show_message_inside_element(e,t=jQuery(".latepoint-body"),a="error"){t.length&&(t.find(".latepoint-message").length?t.find(".latepoint-message").removeClass("latepoint-message-success").removeClass("latepoint-message-error").addClass("latepoint-message-"+a).html(e).show():t.prepend('<div class="latepoint-message latepoint-message-'+a+'">'+e+"</div>"))}function latepoint_set_payment_token_and_submit(e,t){var a;e.find('input[name="booking[payment_token]"]').val(t),e.find(".latepoint-form").find(".latepoint_step_direction").val("next").submit()}jQuery(document).ready((function(e){e(".latepoint").on("click","button[data-os-action], a[data-os-action], div[data-os-action], span[data-os-action]",(function(t){var a=e(this);if(a.data("os-prompt")&&!confirm(a.data("os-prompt")))return!1;var n=e(this).data("os-params");e(this).data("os-source-of-params")&&(n=e(e(this).data("os-source-of-params")).find("select, input, textarea").serialize());var o=a.data("os-return-format")?a.data("os-return-format"):"json",s={action:"latepoint_route_call",route_name:e(this).data("os-action"),params:n,return_format:o};return a.addClass("os-loading"),e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:s,success:function(t){if("success"===t.status){if("lightbox"==a.data("os-output-target"))latepoint_show_data_in_lightbox(t.message,a.data("os-lightbox-classes"));else if("side-panel"==a.data("os-output-target"))e(".latepoint-side-panel-w").remove(),e("body").append('<div class="latepoint-side-panel-w"><div class="latepoint-side-panel-i">'+t.message+'</div><div class="latepoint-side-panel-shadow"></div></div>');else{if("reload"==a.data("os-success-action"))return latepoint_add_notification(t.message),void location.reload();if("redirect"==a.data("os-success-action"))return void(a.data("os-redirect-to")?(latepoint_add_notification(t.message),window.location.replace(a.data("os-redirect-to"))):window.location.replace(t.message));a.data("os-output-target")&&e(a.data("os-output-target")).length?"append"==a.data("os-output-target-do")?e(a.data("os-output-target")).append(t.message):e(a.data("os-output-target")).html(t.message):"before"==a.data("os-before-after")?a.before(t.message):"before"==a.data("os-before-after")?a.after(t.message):latepoint_add_notification(t.message)}if(a.data("os-after-call")){var n=a.data("os-after-call");a.data("os-pass-this")?window[n](a):a.data("os-pass-response")?window[n](t):window[n]()}a.removeClass("os-loading")}else a.removeClass("os-loading"),a.data("os-output-target")&&e(a.data("os-output-target")).length?e(a.data("os-output-target")).prepend(latepoint_generate_form_message_html(t.message,"error")):alert(t.message)}}),!1})),e(".latepoint").on("click",'form[data-os-action] button[type="submit"]',(function(t){e(this).addClass("os-loading")})),e(".latepoint").on("submit","form[data-os-action]",(function(t){t.preventDefault();var a=e(this),n=a.serialize(),o={action:"latepoint_route_call",route_name:e(this).data("os-action"),params:n,return_format:"json"};return a.find('button[type="submit"]').addClass("os-loading"),e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function(t){if(a.find('button[type="submit"].os-loading').removeClass("os-loading"),latepoint_clear_form_messages(a),"success"===t.status){if("reload"==a.data("os-success-action"))return latepoint_add_notification(t.message),void location.reload();if("redirect"==a.data("os-success-action"))return void(a.data("os-redirect-to")?(latepoint_add_notification(t.message),window.location.replace(a.data("os-redirect-to"))):window.location.replace(t.message));if(a.data("os-output-target")&&e(a.data("os-output-target")).length?e(a.data("os-output-target")).html(t.message):"redirect"==t.message?window.location.replace(t.url):(latepoint_add_notification(t.message),a.prepend(latepoint_generate_form_message_html(t.message,"success"))),a.data("os-record-id-holder")&&t.record_id&&a.find('[name="'+a.data("os-record-id-holder")+'"]').val(t.record_id),a.data("os-after-call")){var n=a.data("os-after-call");a.data("os-pass-response")?window[n](t):window[n]()}e("button.os-loading").removeClass("os-loading")}else e("button.os-loading").removeClass("os-loading"),a.data("os-show-errors-as-notification")?latepoint_add_notification(t.message,"error"):(a.prepend(latepoint_generate_form_message_html(t.message,"error")),e([document.documentElement,document.body]).animate({scrollTop:a.find(".os-form-message-w").offset().top-30},200));t.form_values_to_update&&e.each(t.form_values_to_update,(function(e,t){a.find('[name="'+e+'"]').val(t)}))}}),!1}))}));class OsPaymentsBraintree{static create_paypal_button(e){let t=jQuery(e).closest(".latepoint-booking-form-element");var a=latepoint_get_paypal_payment_amount(t);braintree.client.create({authorization:latepoint_helper.braintree_paypal_client_auth}).then((function(e){return braintree.paypalCheckout.create({client:e})})).then((function(n){return paypal.Button.render({style:{label:"pay",size:"large",shape:"rect",tagline:!1,color:"gold"},env:latepoint_helper.braintree_paypal_environment_name,payment:function(){return n.createPayment({flow:"checkout",amount:a,currency:latepoint_helper.paypal_payment_currency,intent:"authorize"})},onAuthorize:function(e,a){return n.tokenizePayment(e).then((function(e){latepoint_set_payment_token_and_submit(t,e.nonce)}))},onCancel:function(e){},onError:function(e){console.error("checkout.js error",e)}},e)})).then((function(){})).catch((function(e){console.error("Error!",e)}))}static create_token(e){var t=jQuery(e).find("#payment_name_on_card"),a=jQuery(e).find("#payment_zip"),n=t?t.value:void 0,o=a?a.value:void 0;OsPaymentsBraintree.hostedFieldsInstance.tokenize((function(t,a){t?("HOSTED_FIELDS_FIELDS_INVALID"==t.code&&t.details.invalidFields&&jQuery.each(t.details.invalidFields,(function(e,t){jQuery(t).addClass("braintree-hosted-fields-invalid")})),latepoint_show_message_inside_element(t.message),jQuery(e).find(".latepoint-next-btn").removeClass("os-loading")):latepoint_set_payment_token_and_submit(e,a.nonce)}))}static init_cc_form(){braintree.client.create({authorization:latepoint_helper.braintree_tokenization_key},(function(e,t){e?console.error(e):braintree.hostedFields.create({client:t,styles:{input:{"font-size":"14px","font-family":latepoint_helper.body_font_family,"font-weight":"500",color:"#fff"},":focus":{color:"#fff"},"::placeholder":{color:"#7d89b1"},".valid":{color:"#fff"},".invalid":{color:"#ff5a16"}},fields:{number:{selector:"#payment_card_number",placeholder:jQuery("#payment_card_number").data("placeholder")},cvv:{selector:"#payment_card_cvc",placeholder:jQuery("#payment_card_cvc").data("placeholder")},expirationDate:{selector:"#payment_card_expiration",placeholder:jQuery("#payment_card_expiration").data("placeholder")}}},(function(e,t){OsPaymentsBraintree.hostedFieldsInstance=t,e&&console.error(e)}))}))}}class OsPaymentsPaypal{static create_paypal_button(e){let t=jQuery(e).closest(".latepoint-booking-form-element");var a=latepoint_get_paypal_payment_amount(t);paypal.Buttons({createOrder:function(e,t){return t.order.create({purchase_units:[{amount:{value:a,currency_code:latepoint_helper.paypal_payment_currency}}],application_context:{shipping_preference:"NO_SHIPPING"}})},onApprove:function(e,a){jQuery(t).removeClass("step-content-loaded").addClass("step-content-loading"),a.order.authorize().then((function(a){var n=a.purchase_units[0].payments.authorizations[0].id,o=e.orderID;latepoint_set_payment_token_and_submit(t,n)}))}}).render(e)}}!function(e){"use strict";function t(e){e.forEach((function(e){e.on("change",(function(e){e.error?latepoint_show_message_inside_element(e.error.message):latepoint_hide_message_inside_element()}))}))}function a(e){var t=jQuery(e).find("#payment_name_on_card"),a=jQuery(e).find("#payment_zip"),n={name:t?t.value:void 0,address_zip:a?a.value:void 0};M.createToken(R,n).then((function(t){t.token?latepoint_set_payment_token_and_submit(e,t.token.id):(latepoint_show_message_inside_element(t.error.message),jQuery(e).find(".latepoint-next-btn").removeClass("os-loading"))}))}function n(){M=Stripe(latepoint_helper.stripe_key),H=M.elements();var e={base:{fontFamily:latepoint_helper.body_font_family,fontSize:"14px",fontWeight:500,color:"#ffffff","::placeholder":{color:"#7d89b1"}}},a={focus:"focused",empty:"empty",invalid:"invalid"};(R=H.create("cardNumber",{style:e,classes:a,placeholder:jQuery("#payment_card_number").data("placeholder")})).mount("#payment_card_number"),(L=H.create("cardExpiry",{style:e,classes:a,placeholder:jQuery("#payment_card_expiration").data("placeholder")})).mount("#payment_card_expiration"),(W=H.create("cardCvc",{style:e,classes:a,placeholder:jQuery("#payment_card_cvc").data("placeholder")})).mount("#payment_card_cvc"),t([R,L,W])}function o(e,t=!1){switch(f(),e){case"datepicker":c();break;case"contact":z();break;case"agents":x();break;case"locations":break;case"services":w();break;case"payment":_(t);break;case"verify":u(t);break;case"confirmation":j();break}}function s(e){var t=e.closest(".latepoint-booking-form-element");e.addClass("selected");var a=e.data("service-duration"),n=e.data("interval"),o=e.data("work-start-time"),s=e.data("work-end-time"),i=e.data("total-work-minutes"),l=!!e.data("available-minutes")&&e.data("available-minutes").toString().split(",").map(Number),r=e.data("day-minutes").toString().split(",").map(Number),d=t.find(".timeslots");if(d.html(""),i>0&&l.length&&r.length){var c=!1;r.forEach((function(e){if(!(e+a>s)){var t=latepoint_am_or_pm(e);if(!1!==c&&e-c>a){var o=latepoint_minutes_to_hours_and_minutes(c+a)+" "+latepoint_am_or_pm(c+a)+" - "+latepoint_minutes_to_hours_and_minutes(e)+" "+latepoint_am_or_pm(e),r=(e-c-a)/(i+a)*100;d.append('<div class="dp-timeslot is-off" style="max-width:'+r+"%; width:"+r+'%"><span class="dp-label">'+o+"</span></div>")}var p="dp-timeslot";l.includes(e)||(p+=" is-booked");var m="";(e%60==0||n>=60)&&(p+=" with-tick",m='<span class="dp-tick"><strong>'+latepoint_minutes_to_hours_preferably(e)+"</strong> "+t+"</span>");var u=latepoint_minutes_to_hours_and_minutes(e)+" "+t;if(latepoint_show_booking_end_time()){var _=e+a,f=latepoint_am_or_pm(_);u+=" - "+latepoint_minutes_to_hours_and_minutes(_)+" "+f}u=u.trim(),d.append('<div class="'+p+'" data-minutes="'+e+'"><span class="dp-label">'+u+"</span>"+m+"</div>"),c=e}}))}else d.append('<div class="not-working-message">'+latepoint_helper.msg_not_available+"</div>")}function i(){e(".dp-timeslot").on("click",(function(){var t=e(this).closest(".latepoint-booking-form-element");if(e(this).hasClass("is-booked")||e(this).hasClass("is-off"));else if(e(this).hasClass("selected"))e(this).removeClass("selected"),e(this).find(".dp-success-label").remove(),t.find(".latepoint_start_time").val(""),hide_next_btn(t),latepoint_update_summary_field(t,"time","");else{t.find(".dp-timeslot.selected").removeClass("selected").find(".dp-success-label").remove();var a=e(this).find(".dp-label").html();e(this).addClass("selected").find(".dp-label").html('<span class="dp-success-label">'+t.find(".latepoint-form").data("selected-label")+"</span>"+a),t.find(".latepoint_start_time").val(e(this).data("minutes")),show_next_btn(t),latepoint_update_summary_field(t,"time",a)}return!1}))}function l(){e(".os-month-next-btn").on("click",(function(){var t=e(this).closest(".latepoint-booking-form-element"),a=e(this).data("route");if(t.find(".os-monthly-calendar-days-w.active + .os-monthly-calendar-days-w").length)t.find(".os-monthly-calendar-days-w.active").removeClass("active").next(".os-monthly-calendar-days-w").addClass("active"),r(t);else if(1){var n=e(this);n.addClass("os-loading");var o=t.find(".os-monthly-calendar-days-w").last(),s=o.data("calendar-year"),i=o.data("calendar-month");12==i?(s+=1,i=1):i+=1;var l,c={action:"latepoint_route_call",route_name:a,params:{target_date_string:s+"-"+i+"-1",location_id:t.find(".latepoint_location_id").val(),agent_id:t.find(".latepoint_agent_id").val(),service_id:t.find(".latepoint_service_id").val(),duration:t.find('input[name="booking[duration]"]').val(),total_attendies:t.find('input[name="booking[total_attendies]"]').val()},layout:"none",return_format:"json"};e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:c,success:function(e){n.removeClass("os-loading"),"success"===e.status&&(t.find(".os-months").append(e.message),t.find(".os-monthly-calendar-days-w.active").removeClass("active").next(".os-monthly-calendar-days-w").addClass("active"),r(t))}})}return d(t),!1})),e(".os-month-prev-btn").on("click",(function(){var t=e(this).closest(".latepoint-booking-form-element");return t.find(".os-monthly-calendar-days-w.active").prev(".os-monthly-calendar-days-w").length&&(t.find(".os-monthly-calendar-days-w.active").removeClass("active").prev(".os-monthly-calendar-days-w").addClass("active"),r(t)),d(t),!1}))}function r(e){e.find(".os-current-month-label .current-year").text(e.find(".os-monthly-calendar-days-w.active").data("calendar-year")),e.find(".os-current-month-label .current-month").text(e.find(".os-monthly-calendar-days-w.active").data("calendar-month-label"))}function d(e){e.find(".os-current-month-label .current-year").text(e.find(".os-monthly-calendar-days-w.active .os-monthly-calendar-days").data("calendar-year")),e.find(".os-current-month-label .current-month").text(e.find(".os-monthly-calendar-days-w.active .os-monthly-calendar-days").data("calendar-month-label")),e.find(".os-monthly-calendar-days-w.active").prev(".os-monthly-calendar-days-w").length?e.find(".os-month-prev-btn").removeClass("disabled"):e.find(".os-month-prev-btn").addClass("disabled")}function c(){i(),l(),e(".os-months").on("click",".os-day",(function(){if(e(this).hasClass("os-day-passed"))return!1;if(e(this).hasClass("os-not-in-allowed-period"))return!1;var t=e(this).closest(".latepoint-booking-form-element");return t.find(".os-day.selected").removeClass("selected"),s(e(this)),i(),e(".times-header span").text(e(this).data("nice-date")),t.find(".time-selector-w").slideDown(200,(function(){var e=t.find(".latepoint-body");e.stop().animate({scrollTop:e[0].scrollHeight},200)})),t.find(".latepoint_start_date").val(e(this).data("date")),latepoint_update_summary_field(t,"date",e(this).data("nice-date")),t.find(".latepoint_start_time").val(""),hide_next_btn(t),!1}))}function p(t){t.find(".lp-paypal-btn-trigger").html(""),latepoint_helper.is_braintree_paypal_active&&OsPaymentsBraintree.create_paypal_button(t.find(".lp-paypal-btn-trigger")[0]),latepoint_helper.is_paypal_native_active&&OsPaymentsPaypal.create_paypal_button(t.find(".lp-paypal-btn-trigger")[0]),e(".lp-paypal-demo-mode-trigger").on("click",(function(){e(this).closest(".latepoint-form").submit()}))}function m(t=!1){if(t){if(!t.find(".lp-card-w").length)return}else if(!e(".lp-card-w").length)return;latepoint_helper.is_braintree_active&&OsPaymentsBraintree.init_cc_form(),latepoint_helper.is_stripe_active&&n()}function u(e=!1){e&&e.closest(".latepoint-summary-is-open").removeClass("latepoint-summary-is-open")}function _(t=!1){t.find(".step-payment-w").data("full-amount")>0&&latepoint_update_summary_field(t,"price",b((100*t.find(".step-payment-w").data("full-amount")/100).toFixed(2))),t&&"deposit"==t.find(".step-payment-w").data("default-portion")&&t.find('input[name="booking[payment_portion]"]').val("deposit"),m(t),t&&"lp-show-paypal"==t.find(".step-payment-w").data("current-payment-step")&&(p(t),hide_next_btn(t)),e(".latepoint-booking-form-element .coupon-code-input-submit").on("click",(function(t){return latepoint_apply_coupon(e(this).closest(".coupon-code-input-w").find(".coupon-code-input")),!1})),e(".latepoint-booking-form-element input.coupon-code-input").on("keyup",(function(t){if(13===t.which)return latepoint_apply_coupon(e(this)),!1})),e(".latepoint-booking-form-element .coupon-code-trigger-w a").on("click",(function(t){return e(this).closest(".payment-total-info").addClass("entering-coupon").find(".coupon-code-input").focus(),!1})),e(".latepoint-booking-form-element .lp-payment-trigger-locally").on("click",(function(t){var a=e(this).closest(".latepoint-booking-form-element");a.find('input[name="booking[payment_method]"]').val(e(this).data("method")),a.find('input[name="booking[payment_portion]"]').val(""),show_next_btn(a)})),e(".latepoint-booking-form-element .lp-payment-trigger-method-selector").on("click",(function(t){var a=e(this).closest(".latepoint-booking-form-element"),n=a.find(".step-payment-w"),o=n.data("current-payment-step"),s="lp-show-pay-methods";return n.removeClass(o).addClass("lp-show-pay-methods").data("current-payment-step","lp-show-pay-methods").data("prev-payment-step",o),hide_next_btn(a),show_prev_btn(a),!1})),e(".latepoint-booking-form-element .lp-payment-trigger-cc").on("click",(function(t){var a=e(this).closest(".latepoint-booking-form-element");a.find('input[name="booking[payment_method]"]').val(e(this).data("method"));var n=a.find(".step-payment-w"),o=n.data("current-payment-step"),s="lp-show-pay-portion-selection";a.find(".lp-payment-portion-selection-w").length?hide_next_btn(a):(s="lp-show-card",show_next_btn(a)),show_prev_btn(a),n.removeClass(o).addClass(s).data("current-payment-step",s).data("prev-payment-step",o)})),e(".latepoint-booking-form-element .lp-payment-trigger-paypal").on("click",(function(t){var a=e(this).closest(".latepoint-booking-form-element");a.find('input[name="booking[payment_method]"]').val(e(this).data("method"));var n=a.find(".step-payment-w"),o=n.data("current-payment-step"),s="lp-show-pay-portion-selection";a.find(".lp-payment-portion-selection-w").length||(p(a),s="lp-show-paypal"),n.removeClass(o).addClass(s).data("current-payment-step",s).data("prev-payment-step",o),hide_next_btn(a),show_prev_btn(a)})),e(".latepoint-booking-form-element .lp-trigger-payment-portion-selector").on("click",(function(t){var a=e(this).closest(".latepoint-booking-form-element"),n=jQuery(this).data("portion");a.find('input[name="booking[payment_portion]"]').val(n),"deposit"==n?a.find(".payment-total-info").addClass("paying-deposit"):a.find(".payment-total-info").removeClass("paying-deposit");var o=a.find(".step-payment-w"),s=o.data("current-payment-step"),i="lp-show-card";"card"==a.find('input[name="booking[payment_method]"]').val()?show_next_btn(a):(p(a),i="lp-show-paypal",hide_next_btn(a)),show_prev_btn(a),o.removeClass(s).addClass(i).data("current-payment-step",i).data("prev-payment-step",s)}))}function f(){e(".os-selectable-items .os-selectable-item").off("click",y),e(".os-selectable-items .os-selectable-item").on("click",y),e(".os-selectable-items .os-selectable-item .item-quantity-selector-input").off("keyup",v),e(".os-selectable-items .os-selectable-item .item-quantity-selector-input").on("keyup",v)}function h(t){var a=0,n=t.find(".latepoint_total_attendies").val()>1?Number(t.find(".latepoint_total_attendies").val()):1;t.find(".os-priced-item.selected").each((function(){var t=e(this).hasClass("has-quantity")?Number(e(this).find("input.item-quantity-selector-input").val()):1,o=100*Number(e(this).data("item-price"))*t,s=e(this).hasClass("not-multiplied-by-attendies")?o:o*n;a+=s})),latepoint_update_summary_field(t,"price",a=(a/=100)?b(a.toFixed(2)):"")}function g(t){var a=t.closest(".os-selectable-items").find(".os-selectable-item.selected").map((function(){return e(this).hasClass("has-quantity")?e(this).data("item-id")+":"+e(this).find("input.item-quantity-selector-input").val():e(this).data("item-id")})).get();t.closest(".latepoint-booking-form-element").find(t.data("id-holder")).val(a)}function v(t){var a=e(this).closest(".latepoint-booking-form-element"),n=e(this).closest(".os-selectable-item"),o=e(this).val();if(o&&o.match(/^\d+$/)){var s=n.data("max-quantity");s&&o>s&&(o=s)}else o=0;if(e(this).val(o),n.hasClass("selected")&&o>0||!n.hasClass("selected")&&0==o)return g(n),h(a),!1;n.trigger("click")}function y(t){t.stopPropagation(),t.stopImmediatePropagation();var a=e(this).closest(".latepoint-booking-form-element");if(e(this).hasClass("has-quantity")){if(e(t.target).hasClass("item-quantity-selector")){var n=parseInt(e(this).find("input.item-quantity-selector-input").val()),o="minus"==e(t.target).data("sign")?n-1:n+1,s=e(this).data("max-quantity");if(o<0&&(o=0),s&&o>s&&(o=s),e(this).find("input.item-quantity-selector-input").val(o),e(this).hasClass("selected")&&o>0||!e(this).hasClass("selected")&&0==o)return g(e(this)),h(a),!1}if(e(t.target).hasClass("item-quantity-selector-input"))return g(e(this)),h(a),!1}var i="";e(this).hasClass("os-allow-multiselect")?(e(this).hasClass("selected")?(e(this).removeClass("selected"),e(this).hasClass("has-quantity")&&e(this).find("input.item-quantity-selector-input").val(0)):(e(this).addClass("selected"),!e(this).hasClass("has-quantity")||e(this).find("input.item-quantity-selector-input").val()>0||e(this).find("input.item-quantity-selector-input").val(1)),g(e(this)),i=String(e(this).closest(".os-selectable-items").find(".os-selectable-item.selected").map((function(){return" "+e(this).data("summary-value")})).get()).trim(),show_next_btn(a)):(e(this).closest(".os-selectable-items").find(".os-selectable-item.selected").removeClass("selected"),e(this).addClass("selected"),a.find(e(this).data("id-holder")).val(e(this).data("item-id")),i=e(this).data("summary-value"),e(this).data("os-call-func")&&window[e(this).data("os-call-func")](e(this)),e(this).data("activate-sub-step")?window[e(this).data("activate-sub-step")](e(this)):C(a)),latepoint_update_summary_field(a,e(this).data("summary-field-name"),i),e(this).hasClass("os-priced-item")&&h(a)}function b(e){return latepoint_helper.currency_symbol_before+String(e)+latepoint_helper.currency_symbol_after}function w(){e(".total-attendies-selector-input").on("change",(function(){var t=e(this).closest(".total-attendies-selector-w").data("max-capacity"),a=e(this).closest(".total-attendies-selector-w").data("min-capacity"),n=e(this).val();n=Math.min(Number(t),Number(n)),n=Math.max(Number(a),Number(n)),e(this).val(n);var o=e(this).closest(".latepoint-booking-form-element");latepoint_update_summary_field(o,"total-attendies",n),h(o)})),e(".total-attendies-selector").on("click",(function(){var t=e(this).hasClass("total-attendies-selector-plus")?1:-1,a=e(this).closest(".total-attendies-selector-w").data("max-capacity"),n=e(this).closest(".total-attendies-selector-w").data("min-capacity"),o=e(this).closest(".total-attendies-selector-w").find("input.total-attendies-selector-input").val(),s=Number(o)>0?Math.max(Number(o)+t,1):1;return s=Math.min(Number(a),s),s=Math.max(Number(n),s),e(this).closest(".total-attendies-selector-w").find("input").val(s).trigger("change"),!1})),e(".os-service-category-info").on("click",(function(){var t;show_prev_btn(e(this).closest(".latepoint-booking-form-element")),e(this).closest(".step-services-w").addClass("selecting-service-category");var a=e(this).closest(".os-service-category-w"),n=e(this).closest(".os-service-categories-main-parent");return a.hasClass("selected")?(a.removeClass("selected"),a.parent().closest(".os-service-category-w").length?a.parent().closest(".os-service-category-w").addClass("selected"):n.removeClass("show-selected-only")):(n.find(".os-service-category-w.selected").removeClass("selected"),n.addClass("show-selected-only"),a.addClass("selected")),!1}))}function C(e){latepoint_helper.manual_next_step&&"off"!=latepoint_helper.manual_next_step?show_next_btn(e):(e.find(".latepoint_step_direction").val("next"),e.find(".latepoint-form").submit())}function k(){}function x(){e(".os-items .os-item-details-btn").on("click",(function(){var t=e(this).closest(".latepoint-booking-form-element"),a=e(this).data("agent-id")
;return t.find(".os-agent-bio-popup.active").removeClass("active"),t.find("#osAgentBioPopup"+a).addClass("active"),!1})),e(".os-agent-bio-close").on("click",(function(){return e(this).closest(".os-agent-bio-popup").removeClass("active"),!1}))}function j(){e(".latepoint-booking-form-element").on("click",".set-customer-password-btn",(function(){var t=e(this),a=e(this).closest(".latepoint-booking-form-element");t.addClass("os-loading");var n={account_nonse:e('input[name="account_nonse"]').val(),password:e('input[name="customer[password]"]').val(),password_confirmation:e('input[name="customer[password_confirmation]"]').val()},o={action:"latepoint_route_call",route_name:e(this).data("btn-action"),params:e.param(n),layout:"none",return_format:"json"};return e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function(e){t.removeClass("os-loading"),"success"===e.status?(a.find(".step-confirmation-set-password").html("").hide(),a.find(".confirmation-cabinet-info").show()):latepoint_show_message_inside_element(e.message,a.find(".step-confirmation-set-password"),"error")}}),!1})),e(".latepoint-booking-form-element").on("click",".qr-show-trigger",(function(){var t;return e(this).closest(".latepoint-booking-form-element").find(".qr-code-on-confirmation").addClass("show-vevent-qr-code"),!1})),e(".latepoint-booking-form-element").on("click",".show-set-password-fields",(function(){var t=e(this).closest(".latepoint-booking-form-element");return t.find(".step-confirmation-set-password").show(),t.find("#customer_password").focus(),e(this).closest(".info-box").hide(),!1}))}function Q(){if(e(".latepoint-login-form-w #facebook-signin-btn").length&&e(".latepoint-login-form-w").length&&e(".latepoint-login-form-w #facebook-signin-btn").on("click",(function(){var t=e(this).closest(".latepoint-login-form-w");FB.login((function(a){if("connected"===a.status&&a.authResponse){var n={token:a.authResponse.accessToken},o={action:"latepoint_route_call",route_name:t.find("#facebook-signin-btn").data("login-action"),params:e.param(n),layout:"none",return_format:"json"};q(t),e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function(e){"success"===e.status?location.reload():(latepoint_show_message_inside_element(e.message,t),F(!1,t))}})}}),{scope:"public_profile,email"})})),e(".latepoint-login-form-w #google-signin-btn").length&&e(".latepoint-login-form-w").length){var t={},a;e(".latepoint-login-form-w").each((function(){var t=e(this);gapi.load("auth2",(function(){var a;gapi.auth2.init({client_id:t.find("meta[name=google-signin-client_id]").attr("content"),cookiepolicy:"single_host_origin"}).attachClickHandler(t.find("#google-signin-btn")[0],{},(function(a){var n={token:a.getAuthResponse().id_token},o={action:"latepoint_route_call",route_name:t.find("#google-signin-btn").data("login-action"),params:e.param(n),layout:"none",return_format:"json"};q(t),e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function(e){"success"===e.status?location.reload():(latepoint_show_message_inside_element(e.message,t),F(!1,t))}})}),(function(e){}))}))}))}}function T(e){var t="",a=e.find('input[name="customer[first_name]"]').val(),n=e.find('input[name="customer[last_name]"]').val();return a&&(t+=a),n&&(t+=" "+n),t.trim()}function z(){N(),P(),latepoint_init_form_masks(),e(".step-contact-w").each((function(){latepoint_update_summary_field(e(this).closest(".latepoint-booking-form-element"),"customer",T(e(this)))})),e(".step-contact-w").on("keyup",'input[name="customer[first_name]"], input[name="customer[last_name]"]',(function(){var t=e(this).closest(".latepoint-booking-form-element");latepoint_update_summary_field(t,"customer",T(t))})),e(".step-contact-w").on("keyup",".os-form-control.required",(function(){var t;D(e(this).closest(".latepoint-booking-form-element").find(".step-contact-w .os-form-control.required"))})),e(".step-customer-logout-btn").on("click",(function(){var t=e(this).closest(".latepoint-booking-form-element"),a={action:"latepoint_route_call",route_name:e(this).data("btn-action"),layout:"none",return_format:"json"};return q(t),e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function(e){latepoint_reload_step(t)}}),!1})),e(".step-login-existing-customer-btn").on("click",(function(){var t=e(this).closest(".latepoint-booking-form-element"),a={email:t.find('.os-step-existing-customer-login-w input[name="customer_login[email]"]').val(),password:t.find('.os-step-existing-customer-login-w input[name="customer_login[password]"]').val()},n={action:"latepoint_route_call",route_name:e(this).data("btn-action"),params:e.param(a),layout:"none",return_format:"json"};return q(t),e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function(e){"success"===e.status?latepoint_reload_step(t):(latepoint_show_message_inside_element(e.message,t.find(".os-step-existing-customer-login-w")),F(!1,t))}}),!1}))}function q(e){e.removeClass("step-content-loaded").addClass("step-content-loading")}function F(e,t){e&&t.find(".latepoint-body .latepoint-step-content").replaceWith(e),t.removeClass("step-content-loading").addClass("step-content-mid-loading"),setTimeout((function(){t.removeClass("step-content-mid-loading").addClass("step-content-loaded")}),50)}function N(){e("#facebook-signin-btn").length&&e(".latepoint-booking-form-element").length&&e("#facebook-signin-btn").on("click",(function(){var t=e(this).closest(".latepoint-booking-form-element");FB.login((function(a){if("connected"===a.status&&a.authResponse){var n={token:a.authResponse.accessToken},o={action:"latepoint_route_call",route_name:t.find("#facebook-signin-btn").data("login-action"),params:e.param(n),layout:"none",return_format:"json"};q(t),e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function(e){"success"===e.status?latepoint_reload_step(t):(latepoint_show_message_inside_element(e.message,t.find(".os-step-existing-customer-login-w ")),F(!1,t))}})}}),{scope:"public_profile,email"})}))}function P(){var t;e("#google-signin-btn").length&&e(".latepoint-booking-form-element").length&&e(".latepoint-booking-form-element").each((function(){var t=e(this);gapi.load("auth2",(function(){var a;gapi.auth2.init({client_id:t.find("meta[name=google-signin-client_id]").attr("content"),cookiepolicy:"single_host_origin"}).attachClickHandler(t.find("#google-signin-btn")[0],{},(function(a){var n={token:a.getAuthResponse().id_token},o={action:"latepoint_route_call",route_name:t.find("#google-signin-btn").data("login-action"),params:e.param(n),layout:"none",return_format:"json"};q(t),e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function(e){"success"===e.status?latepoint_reload_step(t):(latepoint_show_message_inside_element(e.message,t.find(".os-step-existing-customer-login-w ")),F(!1,t))}})}),(function(e){}))}))}))}function I(e,t){e.removeClass("step-changed").addClass("step-changing"),setTimeout((function(){var a=e.find('.latepoint-progress li[data-step-name="'+t+'"]');a.addClass("active").addClass("complete").prevAll().addClass("complete").removeClass("active"),a.nextAll().removeClass("complete").removeClass("active");var n=e.find('.latepoint-step-desc-library[data-step-name="'+t+'"]').html();e.find(".latepoint-step-desc").html(n);var o=e.find('.os-heading-text-library[data-step-name="'+t+'"]').html();e.find(".os-heading-text").html(o),setTimeout((function(){e.removeClass("step-changing").addClass("step-changed")}),50)}),500)}function A(e,t){var a=e.find('.latepoint-progress li[data-step-name="'+t+'"]');a.addClass("active").addClass("complete").prevAll().addClass("complete").removeClass("active"),a.nextAll().removeClass("complete").removeClass("active")}function O(e,t){var a=e.find('.latepoint-progress li[data-step-name="'+t+'"]');a.addClass("active").addClass("complete").prevAll().addClass("complete").removeClass("active"),a.nextAll().removeClass("complete").removeClass("active")}function S(e,t){e.removeClass("step-changed").addClass("step-changing"),setTimeout((function(){e.find(".latepoint-step-desc").html(e.find(".latepoint-step-desc-library.active").removeClass("active").next(".latepoint-step-desc-library").addClass("active").html()),e.find(".os-heading-text").html(e.find(".os-heading-text-library.active").removeClass("active").next(".os-heading-text-library").addClass("active").html()),setTimeout((function(){e.removeClass("step-changing").addClass("step-changed")}),50)}),500)}function B(e,t){e.removeClass("step-changed").addClass("step-changing"),setTimeout((function(){e.find(".latepoint-step-desc").html(e.find(".latepoint-step-desc-library.active").removeClass("active").prev(".latepoint-step-desc-library").addClass("active").html()),e.find(".os-heading-text").html(e.find(".os-heading-text-library.active").removeClass("active").prev(".os-heading-text-library").addClass("active").html()),setTimeout((function(){e.removeClass("step-changing").addClass("step-changed")}),50)}),500)}function D(t){var a=!0;return t.each((function(t){if(""==e(this).val())return a=!1,!1})),a}function E(){if(e(".latepoint-lightbox-close").on("click",(function(){return e("body").removeClass("latepoint-lightbox-active"),e(".latepoint-lightbox-w").remove(),!1})),e(".latepoint-customer-timezone-selector-w select").on("change",(function(t){var a=e(this);a.closest(".latepoint-customer-timezone-selector-w").addClass("os-loading");var n={action:"latepoint_route_call",route_name:e(this).closest(".latepoint-customer-timezone-selector-w").data("route-name"),params:{timezone_name:e(this).val()},layout:"none",return_format:"json"};e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function(e){a.closest(".latepoint-customer-timezone-selector-w").removeClass("os-loading"),"success"===e.status&&location.reload()}})})),e(".latepoint-timezone-selector-w select").on("change",(function(t){var a=e(this);a.closest(".latepoint-timezone-selector-w").addClass("os-loading");var n={action:"latepoint_route_call",route_name:e(this).closest(".latepoint-timezone-selector-w").data("route-name"),params:{timezone_name:e(this).val()},layout:"none",return_format:"json"},o=a.closest(".latepoint-booking-form-element");o.removeClass("step-content-loaded").addClass("step-content-loading"),e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function(e){a.closest(".latepoint-timezone-selector-w").removeClass("os-loading"),o.removeClass("step-content-loading"),"success"===e.status&&a.closest(".latepoint-booking-form-element").hasClass("current-step-datepicker")&&latepoint_reload_step(a.closest(".latepoint-booking-form-element"))}})})),!latepoint_helper.is_timezone_selected){const t=Intl.DateTimeFormat().resolvedOptions().timeZone;t&&t!=e(".latepoint-timezone-selector-w select").val()&&e(".latepoint-timezone-selector-w select").val(t).change()}e(".latepoint-booking-form-element .latepoint-form").on("submit",(function(t){var a=e(this),n=e(this).closest(".latepoint-booking-form-element");t.preventDefault();var s=a.serialize(),i={action:"latepoint_route_call",route_name:a.data("route-name"),params:s,layout:"none",return_format:"json"};n.removeClass("step-content-loaded").addClass("step-content-loading"),e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:i,success:function(e){"success"===e.status?(latepoint_hide_message_inside_element(n.find(".latepoint-body")),n.find(".latepoint_current_step").val(e.step_name),n.removeClass((function(e,t){return(t.match(/(^|\s)current-step-\S+/g)||[]).join(" ")})).addClass("current-step-"+e.step_name),setTimeout((function(){n.removeClass("step-content-loading").addClass("step-content-mid-loading"),n.find(".latepoint-body").find(".latepoint-step-content").addClass("is-hidden"),n.find('.latepoint-step-content[data-step-name="'+e.step_name+'"]')&&n.find('.latepoint-step-content[data-step-name="'+e.step_name+'"]').remove(),n.find(".latepoint-body").append(e.message),o(e.step_name,n),setTimeout((function(){n.removeClass("step-content-mid-loading").addClass("step-content-loaded"),n.find(".latepoint-next-btn, .latepoint-prev-btn").removeClass("os-loading")}),50)}),500),e.is_pre_last_step?n.find(".latepoint-next-btn span").text(n.find(".latepoint-next-btn").data("pre-last-step-label")):n.find(".latepoint-next-btn span").text(n.find(".latepoint-next-btn").data("label")),e.is_last_step?(n.addClass("hidden-buttons").find(".latepoint-footer").remove(),n.find(".latepoint-progress").css("opacity",0),n.closest(".latepoint-summary-is-open").removeClass("latepoint-summary-is-open"),n.addClass("is-final-step")):(!0===e.show_next_btn?show_next_btn(n):hide_next_btn(n),!0===e.show_prev_btn?show_prev_btn(n):hide_prev_btn(n)),I(n,e.step_name)):(n.removeClass("step-content-loading").addClass("step-content-loaded"),n.find(".latepoint-next-btn, .latepoint-prev-btn").removeClass("os-loading"),latepoint_show_message_inside_element(e.message,n.find(".latepoint-body"))),a.find(".latepoint_step_direction").val("next")}})})),e(".latepoint-booking-form-element").on("click",".lp-option",(function(){e(this).closest(".lp-options").find(".lp-option.selected").removeClass("selected"),e(this).addClass("selected")})),e(".latepoint-booking-form-element .latepoint-next-btn").on("click",(function(t){if(e(this).hasClass("disabled")||e(this).hasClass("os-loading"))return!1;var n=e(this).closest(".latepoint-form"),o=n.closest(".latepoint-booking-form-element");return n.find(".latepoint_step_direction").val("next"),"payment"!=o.find(".latepoint_current_step").val()||"card"!=o.find('input[name="booking[payment_method]"]').val()||latepoint_helper.demo_mode?n.submit():(latepoint_helper.is_stripe_active&&a(o),latepoint_helper.is_braintree_active&&OsPaymentsBraintree.create_token(o)),e(this).addClass("os-loading"),!1})),e(".latepoint-booking-form-element .latepoint-prev-btn").on("click",(function(t){if(e(this).hasClass("disabled")||e(this).hasClass("os-loading"))return!1;var a,n=e(this).closest(".latepoint-form").closest(".latepoint-booking-form-element"),o=n.find(".latepoint_current_step").val();if("payment"==o){var s=n.find(".step-payment-w");if(s.length){s.find(".lp-option.selected").removeClass("selected");var i=s.data("current-payment-step"),l=s.data("prev-payment-step");if(l){var r=latepoint_get_new_prev_payment_class(s,l);return s.removeClass(i).addClass(l).data("current-payment-step",l).data("prev-payment-step",r),hide_next_btn(n),!1}}}if("services"==o){var d=n.find(".step-services-w");if(d.hasClass("selecting-service-duration"))return d.removeClass("selecting-service-duration"),d.find(".os-services > .os-item.selected").removeClass("selected"),clear_sub_step_duration(n),n.find(".latepoint-step-content").length<=1&&!d.hasClass("selecting-service-category")&&hide_prev_btn(n),h(n),!1;if(d.hasClass("selecting-total-attendies"))return d.removeClass("selecting-total-attendies"),d.find(".os-services > .os-item.selected").removeClass("selected"),clear_sub_step_attendies(n),n.find(".latepoint-step-content").length<=1&&!d.hasClass("selecting-service-category")&&hide_prev_btn(n),h(n),!1;if(d.hasClass("selecting-service-category"))return d.find(".os-service-category-w .os-service-category-w.selected").length?d.find(".os-service-category-w .os-service-category-w.selected").parents(".os-service-category-w").addClass("selected").find(".os-service-category-w.selected").removeClass("selected"):(d.removeClass("selecting-service-category").find(".os-service-category-w.selected").removeClass("selected"),d.removeClass("selecting-service-category").find(".os-service-categories-holder.show-selected-only").removeClass("show-selected-only")),n.find(".latepoint-step-content").length<=1&&!d.hasClass("selecting-service-category")&&hide_prev_btn(n),h(n),!1}var c=n.find(".latepoint-step-content:last-child");c.data("clear-action")&&window[c.data("clear-action")](n);var p=e(this);p.addClass("os-loading"),n.removeClass("step-content-loaded").addClass("step-content-loading");var m=n.find(".latepoint-step-content.is-hidden").last(),u=m.data("step-name");return I(n,u),setTimeout((function(){if(m.removeClass("is-hidden"),c.remove(),n.find(".latepoint_current_step").val(u),show_next_btn(n),p.removeClass("os-loading"),n.find(".latepoint-step-content").length<=1)if("services"==u){var e=n.find(".step-services-w");e.hasClass("selecting-service-duration")||e.hasClass("selecting-total-attendies")||e.hasClass("selecting-service-category")?show_prev_btn(n):hide_prev_btn(n)}else hide_prev_btn(n);n.removeClass("step-content-loading").addClass("step-content-mid-loading"),setTimeout((function(){n.removeClass("step-content-mid-loading").addClass("step-content-loaded"),latepoint_hide_message_inside_element(n.find(".latepoint-body")),h(n)}),150)}),700),!1}))}var M,H,R,L,W;e((function(){Q(),e(".latepoint-booking-form-element").length&&(E(),e(".latepoint-booking-form-element").each((function(){o(e(this).find(".latepoint_current_step").val())}))),e(".latepoint-request-booking-cancellation").on("click",(function(){if(!confirm(latepoint_helper.cancel_booking_prompt))return!1;var t=e(this),a=t.closest(".customer-booking"),n,o,s={action:"latepoint_route_call",route_name:e(this).data("route"),params:{id:a.data("id")},layout:"none",return_format:"json"};return t.addClass("os-loading"),e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:s,success:function(e){"success"===e.status?location.reload():t.removeClass("os-loading")}}),!1})),e("body").on("click",".os-step-tabs .os-step-tab",(function(){e(this).closest(".os-step-tabs").find(".os-step-tab").removeClass("active"),e(this).addClass("active");var t=e(this).data("target");e(this).closest(".os-step-tabs-w").find(".os-step-tab-content").hide(),e(t).show()})),e("body").on("keyup",".os-form-group .os-form-control",(function(){e(this).val()?e(this).closest(".os-form-group").addClass("has-value"):e(this).closest(".os-form-group").removeClass("has-value")})),e(".latepoint-tab-triggers").on("click",".latepoint-tab-trigger",(function(){var t=e(this).closest(".latepoint-tabs-w");return t.find(".latepoint-tab-trigger.active").removeClass("active"),t.find(".latepoint-tab-content").removeClass("active"),e(this).addClass("active"),t.find(".latepoint-tab-content"+e(this).data("tab-target")).addClass("active"),!1})),e(".latepoint-book-button, .os_trigger_booking").on("click",(function(){var t=e(this),a=latepoint_helper.booking_button_route,n={},s={};t.data("show-service-categories")&&(s.show_service_categories=t.data("show-service-categories")),t.data("show-locations")&&(s.show_locations=t.data("show-locations")),t.data("show-services")&&(s.show_services=t.data("show-services")),t.data("show-agents")&&(s.show_agents=t.data("show-agents")),t.data("selected-location")&&(s.selected_location=t.data("selected-location")),t.data("selected-agent")&&(s.selected_agent=t.data("selected-agent")),t.data("selected-service")&&(s.selected_service=t.data("selected-service")),t.data("selected-service-category")&&(s.selected_service_category=t.data("selected-service-category")),t.data("calendar-start-date")&&(s.calendar_start_date=t.data("calendar-start-date")),0==e.isEmptyObject(s)&&(n.restrictions=s);var i={action:"latepoint_route_call",route_name:a,params:n,layout:"none",return_format:"json"};return t.addClass("os-loading"),e.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:i,success:function(a){if("success"===a.status){var n="";"yes"!=t.data("hide-summary")&&(n+=" latepoint-with-summary"),"yes"==t.data("hide-side-panel")&&(n+=" latepoint-hide-side-panel"),latepoint_show_data_in_lightbox(a.message,n),E(),o(a.step),e("body").addClass("latepoint-lightbox-active"),t.removeClass("os-loading")}else t.removeClass("os-loading")}}),!1}))}))}(jQuery);
//# sourceMappingURL=main_front.js.map